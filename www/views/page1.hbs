<div class="container">
    <h2>{{ title }}</h3>
    <div class="mt-2">
        {{#if prev_link}}<a href="/{{ prev }}" class="btn btn-secondary">Prev</a>{{/if}}
        {{#if next_link}}<a href="/{{ next }}" class="btn btn-primary">Next</a>{{/if}}
    </div>

    <hr/>

    <h4 class="mt-2">From Android</h4>
    <div id="text">
    </div>

    <hr/>

    <h4 class="mt-2">To Android</h4>
    <div class="input-group mb-3">
        <input type="text" class="form-control" value="init text" id="toAppText">
        <div class="input-group-append">
            <button class="btn btn-outline-primary" type="button" id="buttonToAppText">Button</button>
        </div>
    </div>
    <div class="mt-4" id="console"></div>
</div>


<script>
function debug(text) {
    if (!text) {
        return;
    }

    var t = document.createTextNode(text);
    var p = document.createElement('p');
    p.className += ' m-0 mt-1'
    p.style.fontSize = '.7rem';
    p.appendChild(t);
    document.getElementById('console').appendChild(p);
}

document.getElementById('buttonToAppText').addEventListener('click', function (e) {
    var input = document.getElementById('toAppText');
    var text = input.value

    if (JSI && typeof JSI.showToast === 'function') {
        JSI.showToast(text);
        debug('sent text to Android app');
    } else if (window.webkit && window.webkit.messageHandlers && typeof window.webkit.messageHandlers.jsHandler) {
        window.webkit.messageHandlers.jsHandler.postMessage(text);
        debug('sent text to iOS app');
    } else {
        debug('failed to send to app');
    }
})

window.JSI = window.JSI || {};
</script>
